# 问题
1. dns基于什么协议？  
2. tcp和udp有什么区别？  （见下文）
3. 三次握手详细讲讲，为什么需要最少需要三次？
4. 公网ip不够是怎么解决的，在哪一层？


## 1. dns基于什么协议？
udp
## 2. tcp和udp有什么区别？
|对比项|UDP|TCP|
|-|-|-|
|连接性|无连接|面向连接|
|可靠性|不可靠|可靠|
|报文|面向报文-数据报模式|面向字节流-流模式|
|双工性|一对一、一对多、多对一、多对多|全双工|
|流量控制|无|有(滑动窗口)|
|拥塞控制|无|有(慢开始、拥塞避免、快重传、快恢复)|
|传输速度|快|慢|
|资源要求|较少|较多|
|首部开销|8字节|20字节|
|数据顺序|不保证|保证|

### UDP 适用场景

面向数据报方式、网络数据大多为短消息、拥有大量 Client、对数据安全性无特殊要求、网络负担非常重，但对响应速度要求高
流媒体协议（直播）、实时游戏……
### TCP 适用场景

- 文件传输(FTP HTTP 对数据准确性要求较高，速度可以相对慢)
- 发送或接收邮件(POP IMAP SMTP 对数据准确性要求高，非紧急应用)
- 远程登录(telnet SSH 对数据准确性有要求，有连接的概念)

## 3.三次握手详细讲讲，为什么需要最少需要三次？
a和b都要知道，ab、ba都是通的。

|主题|数据流|第一次握手|第二次握手|第三次握手|
|-|-|-|-|-|
|A|Ab||✅|-|
|A|Ba|-|✅|-|
|b|Ab|✅|-|-|
|b|ba|-|-|✅|

## 4. 公网ip不够是怎么解决的，在哪一层？
NAT成公网ip。

Nat 是一个跨层的过程。它至少涉及第 3 层（IP）和第 4 层（TCP、UDP 等）。在某些情况下，它还可能涉及第 7 层（应用程序）。

一对一的 NAT 至少需要修改 IP 地址（第 3 层）、IP 校验和（第 3 层）和 TCP/UDP 校验和（第 4 层）。

一对多 NAT 至少需要修改 IP 地址（第 3 层）、IP 校验和（第 3 层）、TCP/UDP 端口（第 4 层）和 TCP/UDP 校验和（第 4 层）。

这样一个最小的 NAT 会破坏很多东西（例如主动模式 ftp）。因此，大多数 NAT 将超越基础知识，还会对应用程序数据（第 7 层）中的至少一些 IP 地址执行转换和跟踪。